# Intelligent Modular Panel (IMP)

This project demonstrates a modular system for generating user interfaces for IoT devices based on their capabilities and a high-level prompt.

## Architecture

The project is composed of three main components:

1.  **UI Generator**: A server that receives a prompt, a Thing Description (a standardized way to describe an IoT device), and a set of capabilities, and it generates a UI definition for the device.
2.  **External Thing**: A server that simulates an IoT device (in this case, a light switch). It exposes a Thing Description and an API to interact with the device.
3.  **End Devices**: Web applications that display the UI generated by the UI Generator and interact with the External Thing.

## Running with Docker Compose

The repository now ships with a Docker Compose workflow that launches all project services (core-system + registry, knowledge-base, activity-recognition, device API, and device UI) in a single command.

1. Ensure Docker is installed and running. If you are using LM Studio or another model host, expose it at `http://localhost:1234/v1/chat/completions` or update the `LLM_ENDPOINT` environment variable before starting the stack.
2. From the repository root, build and start the services:

   ```bash
   docker compose up --build
   ```

   The first run can take a few minutes while images are built. Subsequent `docker compose up` calls reuse the cached layers.

3. Once the containers are healthy you can access the services at:
   - Service registry API: `http://localhost:3000`
   - Core system UI orchestration API: `http://localhost:3001`
   - Knowledge base: `http://localhost:3005`
   - Activity recognition service: `http://localhost:3003`
   - Device API service: `http://localhost:3002`
   - Device UI preview (Vite dev server): `http://localhost:5173`

4. A named Docker volume `knowledge-base-data` persists the knowledge-base `kb-data.json` file across container restarts. To reset the knowledge base, remove the volume: `docker volume rm ui-gen-poc_knowledge-base-data`.

5. Stop the stack with `Ctrl+C`, then optionally clean up containers with `docker compose down`.

### Customising the Docker stack

- Override any service URL or port via environment variables in `docker-compose.yml`. For example, set `LLM_ENDPOINT` to point at a remote model endpoint.
- The device UI container uses Viteâ€™s dev server for hot reload. Mount the repository into the container or rebuild the image to pick up source code changes.

## Local Development (manual services)

You can still run the services directly with Node.js for iterative development. Make sure you have Node.js and npm installed, then install dependencies and start each package individually or use the `scripts/manage-services.sh` helper to orchestrate the processes.
